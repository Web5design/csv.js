/**
 * csv.js
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2013 Jason Mulligan
 * @license BSD-3 <https://raw.github.com/avoidwork/csv.js/master/LICENSE>
 * @link http://csvjs.com
 * @module csv.js
 * @version 0.1.0
 */
(function(n){"use strict";function t(n){try{return JSON.parse(n)}catch(t){return void 0}}var e=/^\s|\"|\n|,|\s$/,r=/\[object Object\]/,o=/msie|ie/i,c=n.navigator,u=c?o.test(c.userAgent):!1,f=u?parseInt(c.userAgent.replace(/(.*msie|;.*)/gi,""),10):null,a=function(){return!u||f>8?function(n,t){t=t===!0;var e=[];return isNaN(n.length)?t?e=p(n):s(n,function(n){e.push(n)}):e=Array.prototype.slice.call(n),e}:function(n,t){t=t===!0;var e=[];if(isNaN(n.length))t?e=p(n):s(n,function(n){e.push(n)});else try{e=Array.prototype.slice.call(n)}catch(r){s(n,function(n,t){"length"!==t&&e.push(n)})}return e}}(),csv=function(n,e,r){e=e||",",r=r!==!1;var i=t(n)||n,o="";return i instanceof Array?(r&&(o=p(i[0]).join(e)+"\n"),o+=i.map(function(n){return csv(n,e,!1)}).join("\n")):(r&&(o=p(i).join(e)+"\n"),o+=a(i).map(l).join(e)+"\n"),o.replace(/\n$/,"")},s=function(){return"function"==typeof Object.keys?function(n,t){if("function"!=typeof t)throw Error("Invalid arguments");return Object.keys(n).forEach(function(e){return t.call(n,n[e],e)}),n}:function(n,t){var e,r,i=Object.prototype.hasOwnProperty;if("function"!=typeof t)throw Error("Invalid arguments");for(e in n){if(!i.call(n,e))break;if(r=t.call(n,n[e],e),r===!1)break}return n}}(),p=function(){return"function"==typeof Object.keys?function(n){return Object.keys(n)}:function(n){var t=[],e=Object.prototype.hasOwnProperty;for(i in n){if(!e.call(n,i))break;t.push(i)}return t}}(),l=function(n,t){var i;return n instanceof Array?(i='"'+(""+n)+'"',r.test(i)&&(i='"'+csv(n,t)+'"')):i=n instanceof Object?'"'+csv(n,t)+'"':e.test(n)?'"'+n.replace(/"/g,'""')+'"':n,i};csv.version="0.1.0","undefined"!=typeof exports?module.exports=csv:"function"==typeof define?define(function(){return csv}):n.csv=csv})(this);